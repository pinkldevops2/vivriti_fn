---
import LogoShape from "../../../public/Vivrithi_logo.svg";
import LogoShape1 from "../../../public/logowhite.svg";
import LogoAnimation from "../../components/common/logoglow.astro";
---

<div class="w-full xl:px-0 md:px-[0px] md:pt-[70px] pt-[40px]">
  <div class="container mx-auto ">
    <div
      class="flex flex-col md:flex-row justify-between md:gap-10 mb-4 md:mb-20 px-4 xl:px-4 lg:px-8"
    >
      <h2
        class="text-[28px] md:text-[35px] md:text-4xl font-heading leading-[120%] mb-4 gradient-text w-full md:w-4/12"
      >
        Strategise and Scale
      </h2>
      <p data-reveal class="fade-up font-normal text-[17px] w-full md:w-9/12 max-w-[720px] pr-7">
        At Vivriti Next, we enable mid-market enterprises to turn ambition into
        measurable growth. From unlocking capital and optimising financial
        structures to managing risk and embedding sustainability, our solutions
        are designed to empower every stage of your business.
      </p>
    </div>
  </div>
  <div class="relative overflow-hidden">
    <div class="container mx-auto">
    <div
      class="flex flex-col md:flex-row justify-between items-center md:gap-10 mb-4 md:mb-20 px-4 xl:px-4 lg:px-8"
    >
      <div class="w-full md:w-9/12">
        <h4 class="uppercase text-[14px] text-[#F58220] mb-4">Services</h4>
        <div class="w-full advisoryaccordion relative z-2">
          <!-- Item 1 â€” OPEN BY DEFAULT -->
          <div class="accordion-item accordion-active" id="box-1">
            <button
              class="w-full py-3 flex justify-between accordion-header gap-4"
              data-target="item-1"
              data-box="box-1"
            >
              <h2 class="uppercase text-left">Capital Raise</h2>
              <h3 class="font-medium text-[#898989] text-right">
                Connecting enterprises with the right investors
              </h3>
            </button>

            <div
              id="item-1"
              class="overflow-hidden transition-all duration-300"
              style="max-height: 200px;"
            >
              <a
                data-reveal
                href="#"
  data-target-slider="slider-1"
                class="fade-up contact_cta contact_cta-wwhite contact_cta5 flex items-center gap-2 text-white uppercase hover:text-blue-600 transition mb-4 w-full py-3 px-8 justify-center"
              >
                <span data-text="Learn more" class="gradient-text"
                  >Learn more</span
                >
                <img src={LogoShape.src} alt="Vivrithi" class="w-5 h-5" />
              </a>
            </div>
          </div>

          <!-- SEPARATOR -->
          <div class="border-b border-dashed border-[#F58220] my-2"></div>

          <!-- Item 2 -->
          <div class="accordion-item" id="box-2">
            <button
              class="w-full py-3 flex justify-between accordion-header gap-4"
              data-target="item-2"
              data-box="box-2"
            >
              <h2 class="uppercase text-right">Capital Markets</h2>
              <h3 class="font-medium text-[#898989]">
               Optimising debt access and financing costs
              </h3>
            </button>

            <div
              id="item-2"
              class="overflow-hidden transition-all duration-300"
              style="max-height: 0;"
            >
              <a
               href="#"
  data-target-slider="slider-2"
                data-reveal
                class="fade-up contact_cta contact_cta-wwhite contact_cta5 flex items-center gap-2 text-white uppercase hover:text-blue-600 transition mb-4 w-full py-3 px-8 justify-center"
              >
                <span data-text="Learn more" class="gradient-text"
                  >Learn more</span
                >
                <img src={LogoShape.src} alt="Vivrithi" class="w-5 h-5" />
              </a>
            </div>
          </div>

          <!-- SEPARATOR -->
          <div class="border-b border-dashed border-[#F58220] my-2"></div>

          <!-- Item 3 -->
          <div class="accordion-item" id="box-3">
            <button
              class="w-full py-3 flex justify-between accordion-header gap-4"
              data-target="item-3"
              data-box="box-3"
            >
              <h2 class="uppercase">Capital Structuring</h2>
              <h3 class="font-medium text-[#898989]">
                Balancing equity and debt for maximum impact
              </h3>
            </button>

            <div
              id="item-3"
              class="overflow-hidden transition-all duration-300"
              style="max-height: 0;"
            >
               <a
                href="#"
  data-target-slider="slider-3"
                data-reveal
                class="fade-up contact_cta contact_cta-wwhite contact_cta5 flex items-center gap-2 text-white uppercase hover:text-blue-600 transition mb-4 w-full py-3 px-8 justify-center"
              >
                <span data-text="Learn more" class="gradient-text"
                  >Learn more</span
                >
                <img src={LogoShape.src} alt="Vivrithi" class="w-5 h-5" />
              </a>
            </div>
          </div>


           <!-- SEPARATOR -->
          <div class="border-b border-dashed border-[#F58220] my-2"></div>
          
          <!-- Item 4 -->
          <div class="accordion-item" id="box-4">
            <button
              class="w-full py-3 flex justify-between accordion-header gap-4"
              data-target="item-4"
              data-box="box-4"
            >
              <h2 class="uppercase">Risk Management</h2>
              <h3 class="font-medium text-[#898989]">
                Protecting value in a complex business environment
              </h3>
            </button>

            <div
              id="item-4"
              class="overflow-hidden transition-all duration-300"
              style="max-height: 0;"
            >
               <a
               href="#"
  data-target-slider="slider-4"
                data-reveal
                class="fade-up contact_cta contact_cta-wwhite contact_cta5 flex items-center gap-2 text-white uppercase hover:text-blue-600 transition mb-4 w-full py-3 px-8 justify-center"
              >
                <span data-text="Learn more" class="gradient-text"
                  >Learn more</span
                >
                <img src={LogoShape.src} alt="Vivrithi" class="w-5 h-5" />
              </a>
            </div>
          </div>

                     <!-- SEPARATOR -->
          <div class="border-b border-dashed border-[#F58220] my-2"></div>
          
          <!-- Item 5 -->
          <div class="accordion-item" id="box-5">
            <button
              class="w-full py-3 flex justify-between accordion-header gap-4"
              data-target="item-5"
              data-box="box-5"
            >
              <h2 class="uppercase">Credit Ratings</h2>
              <h3 class="font-medium text-[#898989]">
                Building trust with strategic credit advisory
              </h3>
            </button>

            <div
              id="item-5"
              class="overflow-hidden transition-all duration-300"
              style="max-height: 0;"
            >
               <a
                href="#"
  data-target-slider="slider-5"
                data-reveal
                class="fade-up contact_cta contact_cta-wwhite contact_cta5 flex items-center gap-2 text-white uppercase hover:text-blue-600 transition mb-4 w-full py-3 px-8 justify-center"
              >
                <span data-text="Learn more" class="gradient-text"
                  >Learn more</span
                >
                <img src={LogoShape.src} alt="Vivrithi" class="w-5 h-5" />
              </a>
            </div>
          </div>

        <!-- SEPARATOR -->
          <div class="border-b border-dashed border-[#F58220] my-2"></div>
          
          <!-- Item 6 -->
          <div class="accordion-item" id="box-6">
            <button
              class="w-full py-3 flex justify-between accordion-header gap-4"
              data-target="item-6"
              data-box="box-6"
            >
              <h2 class="uppercase">ESG and Climate</h2>
              <h3 class="font-medium text-[#898989]">
                Integrating sustainability into business strategy
              </h3>
            </button>

            <div
              id="item-6"
              class="overflow-hidden transition-all duration-300"
              style="max-height: 0;"
            >
               <a
                href="#"
  data-target-slider="slider-6"
                data-reveal
                class="fade-up contact_cta contact_cta-wwhite contact_cta5 flex items-center gap-2 text-white uppercase hover:text-blue-600 transition mb-4 w-full py-3 px-8 justify-center"
              >
                <span data-text="Learn more" class="gradient-text"
                  >Learn more</span
                >
                <img src={LogoShape.src} alt="Vivrithi" class="w-5 h-5" />
              </a>
            </div>
          </div>
          
        </div>
      </div>
      <div class="w-full md:w-3/12">
         <div class="w-full md:flex justify-end hidden">
          <LogoAnimation />
        </div> 
    </div>
    </div>
   
  </div>
  <!--  <div class="w-full md:flex justify-end hidden absolute xl:top-15 lg:top-20 -right-10 z-0">
          <img src={LogoShape1.src} class="xl:min-w-[450px] lg:min-w-[400px] h-auto" />
        </div> -->
  </div>
  
</div>

<style>
  .accordion-active {
    color: #fff !important;
    background: linear-gradient(
      32deg,
      rgba(0, 1, 138, 1) 0%,
      rgba(59, 186, 226, 1) 100%
    ) !important;
    position: relative;
    /* left: -15px;
    width: calc(100% + 30px); */
    padding: 0 15px;
  }
  .accordion-active .accordion-header{
    padding-top: 25px;
     padding-bottom: 25px;
  }
  .accordion-active h3{
    color:#fff;
  }
  .contact_cta:hover::before {
    width: 100%;
  }
  .advisoryaccordion .gradient-text{
    font-size: 14px;
  }
  .accordion-item h2{
    text-align: left;
  }

    .accordion-item h3{
    text-align: right;
  }
  @media (max-width: 479px) {
    .accordion-active {
      padding: 0 15px;
    }
  }
</style>

<!-- JS for Toggle -->
<script>
  // ACCORDION TOGGLE
  document.querySelectorAll(".accordion-header").forEach((btn) => {
    btn.addEventListener("click", () => {
      const targetId = btn.dataset.target;
      const boxId = btn.dataset.box;

      const content = document.getElementById(targetId);
      const box = document.getElementById(boxId);

      const isOpen =
        content.style.maxHeight && content.style.maxHeight !== "0px";

      // Close all
      document.querySelectorAll(".accordion-item").forEach((item) => {
        item.classList.remove("accordion-active");
      });
      document
        .querySelectorAll(".accordion-item div[id^='item-']")
        .forEach((el) => {
          el.style.maxHeight = 0;
        });

      // Open clicked item
      if (!isOpen) {
        content.style.maxHeight = content.scrollHeight + "px";
        box.classList.add("accordion-active");
      }
    });
  });

  // LINK CLICK: Scroll + Go to Slider
  document.querySelectorAll(".accordion-item a").forEach((link) => {
    link.addEventListener("click", (e) => {
      e.preventDefault(); // Prevent default anchor behavior

      // Scroll to the target section smoothly
      const targetSection = document.querySelector(".target-section");
      if (targetSection) {
        targetSection.scrollIntoView({ behavior: "smooth", block: "start" });
      }

      // Get slider index from data attribute
      const targetSlider = link.dataset.targetSlider;
      if (targetSlider) {
        // Convert slider id to index (assumes slider-1 = index 0)
        const index = parseInt(targetSlider.split("-")[1], 10) - 1;

        // Dispatch global event for Swiper to listen
        window.dispatchEvent(
          new CustomEvent("go-to-slide", { detail: index })
        );
      }
    });
  });
</script>
